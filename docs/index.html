<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/docsite/blog/rss.xml" title="Nervos CKB Developer Documentation Hub RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docsite/blog/atom.xml" title="Nervos CKB Developer Documentation Hub Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Nervos CKB Developer Documentation Hub" href="/docsite/opensearch.xml"><title data-react-helmet="true">Godwoken Introduction | Nervos CKB Developer Documentation Hub</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://xying21.github.com/docsite/docs/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Godwoken Introduction | Nervos CKB Developer Documentation Hub"><meta data-react-helmet="true" name="description" content="Overview"><meta data-react-helmet="true" property="og:description" content="Overview"><link data-react-helmet="true" rel="shortcut icon" href="/docsite/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://xying21.github.com/docsite/docs/"><link data-react-helmet="true" rel="alternate" href="https://xying21.github.com/docsite/docs/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://xying21.github.com/docsite/docs/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/docsite/assets/css/styles.08a746ce.css">
<link rel="preload" href="/docsite/assets/js/runtime~main.7d5934c5.js" as="script">
<link rel="preload" href="/docsite/assets/js/main.fc76167a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docsite/"><div class="navbar__logo"><img src="/docsite/img/whitecryptape.png" alt="cryptape" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/docsite/img/whitecryptape.png" alt="cryptape" class="themedImage_TMUO themedImage--dark_uzRr"></div></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docsite/docs/basics/nervosckb">Learn</a><a class="navbar__item navbar__link" href="/docsite/docs/develop/getstarted">Develop</a><a class="navbar__item navbar__link" href="/docsite/blog">Blog</a><a href="https://discord.gg/WsuVsZ2F6Y" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docsite/docs/develop/getstarted">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Preparation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorials</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Tools</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docsite/docs/tools/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">ckb-cli</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Lumos</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">CKB SDK</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Godwoken</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docsite/docs/">Godwoken Introduction</a></li></ul></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_eoK2"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_e+kA"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Godwoken Introduction</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="overview">Overview<a aria-hidden="true" class="hash-link" href="#overview" title="Direct link to heading">​</a></h2><p><a href="https://github.com/nervosnetwork/godwoken" target="_blank" rel="noopener noreferrer">Godwoken</a> is a layer 2 rollup framework that provides an abstracted account model and abstracted layer 2 transactions upon Nervos CKB.</p><p><a href="https://github.com/nervosnetwork/godwoken-polyjuice" target="_blank" rel="noopener noreferrer">Polyjuice</a> is an Ethereum compatible layer designed upon the Godwoken account model. Godwoken comes together with Polyjuice giving developers the ability to seamlessly deploy and run Ethereum contracts.</p><img src="/docsite/img/arch.png" width="40%"><p>Figure 1. Architecture of Godwoken</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="godwoken-networks">Godwoken Networks<a aria-hidden="true" class="hash-link" href="#godwoken-networks" title="Direct link to heading">​</a></h3><p>Godwoken Testnet and Mainnet are provided for deploying Ethereum DApps to CKB.</p><ul><li><p><a href="https://github.com/nervosnetwork/godwoken-testnet" target="_blank" rel="noopener noreferrer">Godwoken Testnet</a></p><ul><li><p>RPC URL: <a href="https://godwoken-testnet-web3-rpc.ckbapp.dev/" target="_blank" rel="noopener noreferrer">https://godwoken-testnet-web3-rpc.ckbapp.dev/</a></p></li><li><p>Chain ID: 71393</p></li></ul></li><li><p>Godwoken Mainnet</p><p>Todo</p></li></ul><p>A Godwoken network can also be deployed locally. For more information, see the sections of Deployment.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="current-version">Current Version<a aria-hidden="true" class="hash-link" href="#current-version" title="Direct link to heading">​</a></h3><p>The current version available is the <strong>Godwoken beta</strong>. We still maintain various levels of control over the mainnet. </p><p><strong>Why Godwoken Beta?</strong></p><p>It is the responsible way to make Godwoken available while we keep up improving the system before the official release.
Here is what you can do with Godwoken beta:</p><table><thead><tr><th align="left">features</th><th align="center">maintainer</th><th align="center">developer</th></tr></thead><tbody><tr><td align="left">deploy contract</td><td align="center">yes</td><td align="center">trusted*</td></tr><tr><td align="left">deploy ERC20 proxy contract</td><td align="center">yes</td><td align="center">no</td></tr><tr><td align="left">run full nodes</td><td align="center">yes</td><td align="center">no</td></tr><tr><td align="left">run readonly nodes</td><td align="center">yes</td><td align="center">yes**</td></tr></tbody></table><p>During the Godwoken beta phase, the deploy contract feature is only open to developers allowed on the list. We need to upgrade the Godwoken beta or coordinate with developers in case of emergency. Developers or teams are welcome to participate in the Godwoken beta anyways.
In the current version, a readonly node cannot query mem-pool status.</p><p>Godwoken beta is limited to the following design choices:</p><ol><li>An optimistic rollup-based design will be used</li><li>A single sequencer sort transactions and issue blocks</li></ol><p>Beware of Scams and Rugs: Nervos is a permissionless platform. Anybody can deploy an instant of Godwoken. Users and developers must interact with the instant that they can trust.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="deployment">Deployment<a aria-hidden="true" class="hash-link" href="#deployment" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="deploy-a-godwoken-network-by-using-godwoken-kicker">Deploy a Godwoken Network by Using Godwoken-Kicker<a aria-hidden="true" class="hash-link" href="#deploy-a-godwoken-network-by-using-godwoken-kicker" title="Direct link to heading">​</a></h3><p>Godwoken-kicker is a one-line command to start a Godwoken network on <strong>Devnet</strong>. This deployment method helps developers deploy Ethereum contracts and quickly migrate Ethereum DApps to CKB Devnet in testing and development environments.</p><ul><li>RPC URL: http://localhost:8024</li><li>Chain ID: 1024777</li></ul><p>Godwoken-kicker provides a quick mode and a custom mode for deployment.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_vU9c tabs__item--active">Quick Mode</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_vU9c">Custom Mode</li></ul><div class="margin-vert--md"><div role="tabpanel"><p>The quick mode is fast and simple. It executes the builds of all components from pre-built docker images.</p><b>Environment</b><p></p><ul><li>Ubuntu 20.04 LTS</li></ul><p></p><b>Prerequisites</b><p></p><ul><li><a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">Docker Engine</a></li><li><a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">Docker Compose</a></li></ul><p></p><p><b>Steps</b></p><ol><li><p>Clone the source of Godwoken-kicker.</p><p>If it is already cloned, skip to the next step.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">git</span><span class="token plain"> clone https://github.com/RetricSu/godwoken-kicker.git</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Initialize Godwoken-kicker.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Stop any running Godwoken network by using the <code>make stop</code> command before initializing Godwoken-kicker. </p></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">cd</span><span class="token plain"> godwoken-kicker</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">make</span><span class="token plain"> init</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <code>make init</code> command can be used in the following situations:</p><ul><li>It is the first time to start the Godwoken network.</li><li>The deployment mode is changed.</li><li>The CKB chain data and all layer 1 related cache data are deleted.</li></ul></li><li><p>Start the Godwoken network.</p><p>The <code>make start</code> command can be used to start the deployed Godwoken network. The <code>make start-f</code> command can be used to force deploy and start a new Godwoken network.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">make</span><span class="token plain"> start</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>  Do note that after running the <code>make clean</code> command, run <code>make init</code> again if a reboot is desired. </p></div></div><details class="details_Q743 alert alert--info details_h+cY" data-collapsed="true"><summary>Output</summary><div><div class="collapsibleContent_K5uX"><p></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">Building ckb</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Building polyjuice</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Building call-polyman</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Building godwoken</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Building web3</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Starting docker_postgres_1 </span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(12, 150, 155)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Starting docker_ckb_1      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(12, 150, 155)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Starting docker_polyjuice_1    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(12, 150, 155)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Starting docker_call-polyman_1 </span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(12, 150, 155)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Starting docker_indexer_1      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(12, 150, 155)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Starting docker_godwoken_1     </span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(12, 150, 155)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Starting docker_web3_1         </span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(12, 150, 155)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Run commands to monitor background activities: </span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">make</span><span class="token plain"> sg </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Godwoken</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">make</span><span class="token plain"> sp </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Polyjuice</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">make</span><span class="token plain"> web3 </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">web3</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">make</span><span class="token plain"> call-polyman </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">setup </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">service</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">All Jobs Done       </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">########################################] 100%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Great</span><span class="token operator" style="color:rgb(12, 150, 155)">!</span><span class="token plain"> Checkout http://localhost:6100 to deploy contract</span><span class="token operator" style="color:rgb(12, 150, 155)">!</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p></p></div></div></details></li><li><p>Set up an Ethereum wallet.</p><p>In this example, a MetaMask (an Ethereum Wallet) wallet is set up for the deployment. Add the MetaMask extension in the browser (Firefox, Google Chrome, Brave or Microsoft Edge) and create an account for the wallet.</p><p>If there is a MetaMask wallet ready to be used, skip to the next step directly.</p></li><li><p>After the Godwoken network has been successfully launched, visit the website <a>http://localhost:6100</a> and connect the MetaMask wallet by clicking the <b>Connect Wallet</b> button.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">  RPC URL=http://localhost:8024</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  CHAIN ID=1024777</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Deploy an ETH contract to the Godwoken network.</p><ol><li><p>Prepare and compile an ETH contract.</p></li><li>Deposit 400 CKB to the ETH wallet on the <b>ACCOUNTS</b> page of the Godwoken network.</li><li>Deploy the ETH contract that you have compiled on the <b>CONTRACT</b> page of the Godwoken network.</li></ol></li></ol></div><div role="tabpanel" hidden=""><p>The custom mode is more flexible for custom requirements. It can build the components from local packages and executes the builds locally.</p><b>Environment</b><p></p><ul><li>Ubuntu 20.04 LTS</li></ul><p></p><b>Prerequisites</b><p></p><ul><li><a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">Docker Engine</a></li><li><a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">Docker Compose</a></li><li><a href="https://github.com/nervosnetwork/molecule" target="_blank" rel="noopener noreferrer">Moleculec</a></li><li>Rustup nightly</li></ul><p></p><p><b>Steps</b></p><ol><li><p>Clone the source of Godwoken-kicker.</p><p>If it is already cloned, skip to the next step directly.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">git</span><span class="token plain"> clone https://github.com/RetricSu/godwoken-kicker.git</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Set the mode with <code>true</code> under the <code>[mode]</code> section in the <code>/docker/.build.mode.env</code> file for the components that you want to build from local packages.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI title=&quot;/docker/.build.mode.env&quot;"><pre tabindex="0" class="prism-code language-title=&quot;/docker/.build.mode.env&quot; codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">####[mode]</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">MANUAL_BUILD_GODWOKEN=false</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">MANUAL_BUILD_WEB3=false</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">MANUAL_BUILD_SCRIPTS=false</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">MANUAL_BUILD_POLYJUICE=false</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>(Optional) Configure component version under the <code>[packages]</code> section in the <code>docker/.build.mode.env</code> file.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI title=&quot;/docker/.build.mode.env&quot;"><pre tabindex="0" class="prism-code language-title=&quot;/docker/.build.mode.env&quot; codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">####[packages]</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">GODWOKEN_GIT_URL=https://github.com/nervosnetwork/godwoken.git</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">GODWOKEN_GIT_CHECKOUT=master</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">POLYMAN_GIT_URL=https://github.com/RetricSu/godwoken-polyman.git</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">POLYMAN_GIT_CHECKOUT=master</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">WEB3_GIT_URL=https://github.com/nervosnetwork/godwoken-web3.git</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">WEB3_GIT_CHECKOUT=main</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Initialize Godwoken-kicker.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Stop any running Godwoken network by using the <code>make stop</code> command before initializing Godwoken-kicker.</p></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">cd</span><span class="token plain"> godwoken-kicker</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">make</span><span class="token plain"> init</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <code>make init</code> command can be used in the following situations:</p><ul><li>The first time to start the Godwoken network.</li><li>The deployment mode is changed.</li><li>The CKB chain data and all layer 1 related cache data are deleted.</li></ul></li><li><p>Start the Godwoken network.</p><p>The <code>make start</code> command can be used to start the deployed Godwoken network. The <code>make start-f</code> command can be used to force deploy and start a new Godwoken network.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">make</span><span class="token plain"> start</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><details class="details_Q743 alert alert--info details_h+cY" data-collapsed="true"><summary>Output</summary><div><div class="collapsibleContent_K5uX"><p></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">Building ckb</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Building polyjuice</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Building call-polyman</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Building godwoken</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Building web3</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Starting docker_postgres_1 </span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(12, 150, 155)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Starting docker_ckb_1      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(12, 150, 155)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Starting docker_polyjuice_1    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(12, 150, 155)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Starting docker_call-polyman_1 </span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(12, 150, 155)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Starting docker_indexer_1      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(12, 150, 155)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Starting docker_godwoken_1     </span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(12, 150, 155)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Starting docker_web3_1         </span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(12, 150, 155)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Run commands to monitor background activities: </span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">make</span><span class="token plain"> sg </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Godwoken</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">make</span><span class="token plain"> sp </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Polyjuice</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">make</span><span class="token plain"> web3 </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">web3</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">make</span><span class="token plain"> call-polyman </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">setup </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">service</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">All Jobs Done       </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">########################################] 100%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Great</span><span class="token operator" style="color:rgb(12, 150, 155)">!</span><span class="token plain"> Checkout http://localhost:6100 to deploy contract</span><span class="token operator" style="color:rgb(12, 150, 155)">!</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p></p></div></div></details></li><li><p>Set up an Ethereum wallet.</p><p>In this example, a MetaMask (an Ethereum Wallet) wallet is set up for the deployment. Add the MetaMask extension in the browser (Firefox, Google Chrome, Brave or Microsoft Edge) and create an account for the wallet.</p><p>If there is a MetaMask wallet ready to be used, skip this and go to the next step directly.</p></li><li><p>After the Godwoken network has been successfully launched, visit the website <a>http://localhost:6100</a> and connect the MetaMask wallet by clicking the <b>Connect Wallet</b> button.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">  RPC URL=http://localhost:8024</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  CHAIN ID=1024777</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Deploy an ETH contract to the Godwoken network.</p><ol><li><p>Prepare and compile an ETH contract.</p></li><li><p>Deposit 400 CKB to the ETH wallet on the <b>ACCOUNTS</b> page of the Godwoken network.</p></li><li><p>Deploy the ETH contract that you have compiled on the <b>CONTRACT</b> page of the Godwoken network.</p></li></ol></li></ol></div></div></div><p>For more information about the Godwoken-kicker commands, see <a href="https://github.com/RetricSu/godwoken-kicker" target="_blank" rel="noopener noreferrer">godwoken-kicker</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="deploy-a-godwoken-network-manually">Deploy a Godwoken Network Manually<a aria-hidden="true" class="hash-link" href="#deploy-a-godwoken-network-manually" title="Direct link to heading">​</a></h3><p>This deployment method is useful in situations such as deploying a Godwoken network on <b>Testnet</b> or <b>Mainnet</b>.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="environment">Environment<a aria-hidden="true" class="hash-link" href="#environment" title="Direct link to heading">​</a></h4><ul><li>OS: Ubuntu 20.04</li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="prerequisites">Prerequisites<a aria-hidden="true" class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h4><p>The following tools need to be installed before entering the deployment process:</p><ul><li><p>Yarn (version 1.22.5 or above)</p></li><li><p>GCC and make</p><p>To install <code>GCC</code> and <code>make</code> on Ubuntu 20.04, run the following command as root or user with sudo privileges:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">apt</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">apt</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">install</span><span class="token plain"> build-essential</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p><a href="https://github.com/nervosnetwork/capsule/releases/tag/v0.4.6" target="_blank" rel="noopener noreferrer">Capsule v0.4.6</a></p></li><li><p>Rustc nightly v1.54.0</p></li><li><p><a href="https://github.com/nervosnetwork/molecule" target="_blank" rel="noopener noreferrer">Moleculec v0.7.2</a></p><p>To install Moleculec:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ cargo </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">install</span><span class="token plain"> moleculec</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Docker</p><p><strong>Docker</strong> must be installed for building and deploying Godwoken. For more information about Docker installation, see <a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">Install Docker Engine on Ubuntu</a>.</p><p>To manage Docker as a non-root user, see the Docker documentation of <a href="https://docs.docker.com/engine/install/linux-postinstall/" target="_blank" rel="noopener noreferrer">Manage Docker as a non-root user</a>.</p><p>For more information about the tags of the pre-built docker image, see <a href="https://hub.docker.com/r/nervos/godwoken-prebuilds/tags?page=1&amp;ordering=last_updated." target="_blank" rel="noopener noreferrer">nervos/godwoken-prebuilds</a> </p></li><li><p><a href="https://github.com/nervosnetwork/tippy/releases" target="_blank" rel="noopener noreferrer">Tippy</a></p><p>Tippy is a tool to help set up and manage CKB nodes. For more information, see <a href="https://cryptape.github.io/lumos-doc/docs/reference/ckbnode#install-a-ckb-node-by-using-tippy" target="_blank" rel="noopener noreferrer">Install a CKB Node by Using Tippy</a>. The verified Tippy version in this documentation is <a href="https://github.com/nervosnetwork/tippy/releases/tag/v0.3.2" target="_blank" rel="noopener noreferrer">v0.3.2</a>.</p></li><li><p>ckb-cli: The ckb-cli tool is used for deploying smart contracts. It can be installed from a <a href="https://github.com/nervosnetwork/ckb/releases" target="_blank" rel="noopener noreferrer">CKB pre-built installer package</a>. The verified ckb-cli version in this documentation is <a href="https://github.com/nervosnetwork/ckb/releases/tag/v0.42.0" target="_blank" rel="noopener noreferrer">v0.42.0</a>.</p></li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The current user must have permissions to run ckb-cli, Capsule, Moleculec and docker. If the execution of these tools requires sudo commands, that may cause issues during the deployment process.</p></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="steps">Steps<a aria-hidden="true" class="hash-link" href="#steps" title="Direct link to heading">​</a></h4><ol><li><p>Create a CKB account for the deployment.</p><p>The account must have enough CKB capacity for the deployment.  For more information about CKB accounts and creating CKB accounts, see <a href="https://cryptape.github.io/lumos-doc/docs/reference/ckbaccount" target="_blank" rel="noopener noreferrer">CKB Accounts and Capacity</a>.</p><p>Example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">address:</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  mainnet: ckb1qyqpadsep7yruydz5eaulty4xwc2sn6smhashalnjx</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  testnet: ckt1qyqpadsep7yruydz5eaulty4xwc2sn6smhas2cpv76</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">lock_arg: 0x1eb6190f883e11a2a67bcfac9533b0a84f50ddfb</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">lock_hash: 0x499aa230ded32812a246778bc718f4d61a47497c1b7352211d241d2ad333ed75</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">pk: 0xca02cc4b8e0e447e243204dd2e16a1692026bfdd4add502b203975999d3a6909</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The account information in this documentation is only used for demonstration. Do <strong>not</strong> use these private keys, addresses and args elsewhere.</p></div></div></li><li><p>Start the CKB node and the CKB miner.</p><ol><li><p>Launch the Tippy dashboard.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">cd</span><span class="token plain"> tippy-linux-x64</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ ./Tippy</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Start the CKB node and the CKB miner on the Tippy dashboard.</p></li></ol></li><li><p>Clone the Godwoken source.</p><p>Open a new terminal window and run the following command to clone the Godwoken source:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">git</span><span class="token plain"> clone --recursive https://github.com/nervosnetwork/godwoken</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Prepare a <code>pk</code> file and a <code>scripts-build.json</code> file under the <code>/godwoken/deploy</code> folder.</p><p>The <code>/godwoken/deploy/pk</code> file stores the private key that is used to deploy Godwoken.</p><p>Example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI title=&quot;/godwoken/deploy/pk&quot;"><pre tabindex="0" class="prism-code language-title=&quot;/godwoken/deploy/pk&quot; codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">0xca02cc4b8e0e447e243204dd2e16a1692026bfdd4add502b203975999d3a6909</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <code>/godwoken/deploy/scripts-build.json</code> file specifies the pre-built docker image of Godwoken and the repositories of the other components like godwoken_scripts, godwoken_polyjuice and clerkb.</p><div class="codeBlockContainer_J+bg"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_oQzk">/godwoken/deploy/scripts-build.json</div><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token property" style="color:rgb(12, 150, 155)">&quot;prebuild_image&quot;</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;nervos/godwoken-prebuilds:&lt;tag&gt;&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token property" style="color:rgb(12, 150, 155)">&quot;repos&quot;</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token property" style="color:rgb(12, 150, 155)">&quot;godwoken_scripts&quot;</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;https://github.com/nervosnetwork/godwoken-scripts#master&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token property" style="color:rgb(12, 150, 155)">&quot;godwoken_polyjuice&quot;</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;https://github.com/nervosnetwork/godwoken-polyjuice#main&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token property" style="color:rgb(12, 150, 155)">&quot;clerkb&quot;</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;https://github.com/nervosnetwork/clerkb#v0.4.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about the tags of the pre-built docker image, see <a href="https://hub.docker.com/r/nervos/godwoken-prebuilds/tags?page=1&amp;ordering=last_updated" target="_blank" rel="noopener noreferrer">https://hub.docker.com/r/nervos/godwoken-prebuilds/tags?page=1&amp;ordering=last_updated</a>.</p><p>Example:</p><div class="codeBlockContainer_J+bg"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_oQzk">/godwoken/deploy/scripts-build.json</div><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token property" style="color:rgb(12, 150, 155)">&quot;prebuild_image&quot;</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;nervos/godwoken-prebuilds:v0.6.1&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token property" style="color:rgb(12, 150, 155)">&quot;repos&quot;</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token property" style="color:rgb(12, 150, 155)">&quot;godwoken_scripts&quot;</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;https://github.com/nervosnetwork/godwoken-scripts#master&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token property" style="color:rgb(12, 150, 155)">&quot;godwoken_polyjuice&quot;</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;https://github.com/nervosnetwork/godwoken-polyjuice#main&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token property" style="color:rgb(12, 150, 155)">&quot;clerkb&quot;</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;https://github.com/nervosnetwork/clerkb#v0.4.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Set up Godwoken nodes.</p><p>The setup command for setting up Godwoken nodes is as follows:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token assign-left variable" style="color:rgb(201, 103, 101)">RUST_LOG</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">info cargo +nightly run --bin gw-tools -- setup --cells-lock-address </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">CKB-address</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> -s deploy/scripts-build.json -k deploy/pk -o deploy/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>To set up Godwoken nodes with the CKB address of the deployment cells owner: </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">cd</span><span class="token plain"> godwoken</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token assign-left variable" style="color:rgb(201, 103, 101)">RUST_LOG</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">info cargo +nightly run --bin gw-tools -- setup --cells-lock-address ckt1qyqpadsep7yruydz5eaulty4xwc2sn6smhas2cpv76 -s deploy/scripts-build.json -k deploy/pk -o deploy/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This setup command compiles Godwoken scripts, deploys the scripts and layer 2 genesis blocks, and generates configuration files. </p><p>After the setup command is completed, a <code>config.toml</code> file is generated under <code>/godwoken/deploy/node1</code> and <code>/godwoken/deploy/node2</code>, and a <code>scripts-deploy-result.json</code> file is generated under <code>/godwoken/deploy</code>.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If an error about failing to obtain the <a href="https://raw.githubusercontent.com/nervosnetwork/godwoken/2221efdfcf06351fa1884ea0f2df1604790c3378/crates/types/schemas/godwoken.mol" target="_blank" rel="noopener noreferrer"> godwoken.mol</a> and <a href="https://raw.githubusercontent.com/nervosnetwork/godwoken/2221efdfcf06351fa1884ea0f2df1604790c3378/crates/types/schemas/blockchain.mol" target="_blank" rel="noopener noreferrer">blockchain.mol</a> file is encountered during the setup process, try the following workaround to fix the error:</p><ul><li><p>Comment the lines for downloading <code>blockchain.mol</code> and <code>godwoken.mol</code> in the <code>/godwoken/tmp/scripts-build-dir/godwoken-polyjuice/Makefile</code> file.</p></li><li><p>Download the two files manually and copy the files into the <code>/godwoken/tmp/scripts-build-dir/godwoken-polyjuice/build</code> folder.</p></li><li><p>Execute the setup command again until it succeeds.</p></li></ul></div></div></li><li><p>Configure the receiver lock.</p><ol><li><p>Generate the config.json file for the CKB chain.</p><p>Download the config generator tool, <a href="https://github.com/classicalliu/lumos-config-generator/releases/download/v0.1.1/lumos-config-generator-linux-amd64" target="_blank" rel="noopener noreferrer">lumos-config-generator-linux-amd64</a> for Linux platforms.</p><p>Run the <strong>lumos-config-generator-linux-amd64</strong> file to generate the config.json file in the project root directory.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The CKB node must be running when executing the generator to generate the config file.</p></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ ./lumos-config-generator-linux-amd64 config.json http://127.0.0.1:8114</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Assign a receiver lock in the node&#x27;s <code>config.toml</code> file. </p><p>The code_hash of the receiver lock is the CODE_HASH of the SECP256K1_BLAKE160 script from the config.json file.</p><p>The args is the lock args of the deployment cells owner.</p><p>Example:</p><div class="codeBlockContainer_J+bg"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_oQzk">config.toml</div><div class="codeBlockContent_csEI toml"><pre tabindex="0" class="prism-code language-toml codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">[block_producer.challenger_config.rewards_receiver_lock]</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">code_hash = &#x27;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&#x27;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">hash_type = &#x27;type&#x27;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">args = &#x27;0x1eb6190f883e11a2a67bcfac9533b0a84f50ddfb&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol></li><li><p>Start the Godwoken nodes.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The default node mode is <code>readonly </code>. It can be modified in <code>config.toml</code> to either <code>fullnode</code> mode or <code>test</code> mode.</p><p>If the two <code>readonly</code> nodes need to be started within the same environment, manually modify the listening port number in the <code>config.toml</code> file for each node.</p></div></div><p>Run the following command to start node1:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token assign-left variable" style="color:rgb(201, 103, 101)">RUST_LOG</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">info cargo +nightly run --bin godwoken run -c deploy/node1/config.toml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If an error about the use of unstable library feature is encountered during the process, try the following commands to fix the issue:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ cargo </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">install</span><span class="token plain"> cargo-edit</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ cargo upgrade --workspace num-bigint</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Set up Polyjuice.</p><p>Clone the source of godwoken-examples. For more information, see <a href="https://github.com/nervosnetwork/godwoken-examples" target="_blank" rel="noopener noreferrer">godwoken-examples</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">git</span><span class="token plain"> clone --recursive https://github.com/nervosnetwork/godwoken-examples</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Then, create an account on Polyjuice. It will take some time to build index for the first time. </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">cd</span><span class="token plain"> godwoken-examples</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">yarn</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">yarn</span><span class="token plain"> run build-all</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># export SCRIPT_DEPLOY_RESULT_PATH=&lt;Path to scripts-deploy-result.json&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(201, 103, 101)">SCRIPT_DEPLOY_RESULT_PATH</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">~/godwoken/deploy/scripts-deploy-result.json</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># export GODWOKEN_CONFIG_PATH=&lt;Path to godwoken config.toml&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(201, 103, 101)">GODWOKEN_CONFIG_PATH</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">~/godwoken/deploy/node1/config.toml</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">yarn</span><span class="token plain"> run copy-configs</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># LUMOS_CONFIG_FILE=&lt;Path to config.json&gt; node ./packages/tools/lib/account-cli.js deposit -c 40000000000 -p &lt;privkey&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token assign-left variable" style="color:rgb(201, 103, 101)">LUMOS_CONFIG_FILE</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">~/config.json node ./packages/tools/lib/account-cli.js deposit -c </span><span class="token number" style="color:rgb(170, 9, 130)">40000000000</span><span class="token plain"> -p 0xca02cc4b8e0e447e243204dd2e16a1692026bfdd4add502b203975999d3a6909</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about generating the Lumos config file for DEV chain, see <a href="https://cryptape.github.io/lumos-doc/docs/guides/config#step-1-generate-the-configjson-file-for-the-dev-chain" target="_blank" rel="noopener noreferrer">Generate the config.json file for the DEV chain</a>.</p></li><li><p>Start the web3 server.</p><ol><li><p>Create a PostgreSQL instance.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ docker run --name postgres -e </span><span class="token assign-left variable" style="color:rgb(201, 103, 101)">POSTGRES_USER</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">user -e </span><span class="token assign-left variable" style="color:rgb(201, 103, 101)">POSTGRES_DB</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">godwoken -e </span><span class="token assign-left variable" style="color:rgb(201, 103, 101)">POSTGRES_PASSWORD</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">mypassword -d -p </span><span class="token number" style="color:rgb(170, 9, 130)">5432</span><span class="token plain">:5432 postgres</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Clone the source of <a href="https://github.com/nervosnetwork/godwoken-web3" target="_blank" rel="noopener noreferrer">godwoken-web3</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">git</span><span class="token plain"> clone https://github.com/nervosnetwork/godwoken-web3</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Prepare the <code>.env</code> file under <code>/godwoken-web3/packages/api-server</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">cd</span><span class="token plain"> godwoken-web3</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">cat</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> ./packages/api-server/.env </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;&lt;</span><span class="token string" style="color:rgb(72, 118, 214)">EOF</span><br></span><span class="token-line" style="color:#403f53"><span class="token string" style="color:rgb(72, 118, 214)">DATABASE_URL=postgres://user:password@postgres:5432/godwoken</span><br></span><span class="token-line" style="color:#403f53"><span class="token string" style="color:rgb(72, 118, 214)">GODWOKEN_JSON_RPC=http://godwoken:8119</span><br></span><span class="token-line" style="color:#403f53"><span class="token string" style="color:rgb(72, 118, 214)">ETH_ACCOUNT_LOCK_HASH=&lt;Eth Account Lock Code Hash&gt;</span><br></span><span class="token-line" style="color:#403f53"><span class="token string" style="color:rgb(72, 118, 214)">ROLLUP_TYPE_HASH=&lt;Rollup Type Hash&gt;</span><br></span><span class="token-line" style="color:#403f53"><span class="token string" style="color:rgb(72, 118, 214)">PORT=8024</span><br></span><span class="token-line" style="color:#403f53"><span class="token string" style="color:rgb(72, 118, 214)">CHAIN_ID=1024777</span><br></span><span class="token-line" style="color:#403f53"><span class="token string" style="color:rgb(72, 118, 214)">CREATOR_ACCOUNT_ID=3</span><br></span><span class="token-line" style="color:#403f53"><span class="token string" style="color:rgb(72, 118, 214)">DEFAULT_FROM_ADDRESS=0x1eb6190f883e11a2a67bcfac9533b0a84f50ddfb</span><br></span><span class="token-line" style="color:#403f53"><span class="token string" style="color:rgb(72, 118, 214)">POLYJUICE_VALIDATOR_TYPE_HASH=&lt;Polyjuice Validator Code Hash&gt;</span><br></span><span class="token-line" style="color:#403f53"><span class="token string" style="color:rgb(72, 118, 214)">L2_SUDT_VALIDATOR_SCRIPT_TYPE_HASH=&lt;L2 Sudt Validator Code Hash&gt;</span><br></span><span class="token-line" style="color:#403f53"><span class="token string" style="color:rgb(72, 118, 214)">TRON_ACCOUNT_LOCK_HASH=&lt;Tron Account Lock Code Hash&gt;</span><br></span><span class="token-line" style="color:#403f53"><span class="token string" style="color:rgb(72, 118, 214)">EOF</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Start the web3 server.</p><p>To start the web3 server properly, make sure to clear the postgres database, and then run the migration SQL file to recreate the tables before running the server:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">yarn</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">yarn</span><span class="token plain"> run migrate:latest</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">yarn</span><span class="token plain"> run build:godwoken</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">yarn</span><span class="token plain"> run start</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol></li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="how-to-use-godwoken">How to Use Godwoken<a aria-hidden="true" class="hash-link" href="#how-to-use-godwoken" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="workflow">Workflow<a aria-hidden="true" class="hash-link" href="#workflow" title="Direct link to heading">​</a></h3><ol><li><p>Set up the environment.</p></li><li><p>Choose Godwoken testnet or mainnet network, or deploy a local Godwoken network.</p><p>For more information about Godwoken networks, see <a href="#godwoken-networks">Godwoken Networks</a>.</p><p>For more information about deploying a Godwoken network, see the sections under Deployment.</p></li><li><p>Deploy an Ethereum DApp to Godwoken.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="rpc-documentation-for-reference">RPC Documentation for Reference<a aria-hidden="true" class="hash-link" href="#rpc-documentation-for-reference" title="Direct link to heading">​</a></h3><p>Godwoken provides a web3 RPC compatible layer.</p><p>For more information, see <a href="https://github.com/nervosnetwork/godwoken-web3" target="_blank" rel="noopener noreferrer">Ethereum RPC (web3 RPC)</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="an-example-of-deploying-an-ethereum-dapp-to-godwoken-by-godwoken-kicker">An Example of Deploying an Ethereum DApp to Godwoken by Godwoken-Kicker<a aria-hidden="true" class="hash-link" href="#an-example-of-deploying-an-ethereum-dapp-to-godwoken-by-godwoken-kicker" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="environment-1">Environment<a aria-hidden="true" class="hash-link" href="#environment-1" title="Direct link to heading">​</a></h4><ul><li>Ubuntu 20.04</li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="prerequisite-development-software">Prerequisite Development Software<a aria-hidden="true" class="hash-link" href="#prerequisite-development-software" title="Direct link to heading">​</a></h4><ul><li>Node.js v14</li><li>Yarn </li><li>Docker</li><li>Docker-compose</li><li>Rust</li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="prerequisite-wallet-software">Prerequisite Wallet Software<a aria-hidden="true" class="hash-link" href="#prerequisite-wallet-software" title="Direct link to heading">​</a></h4><ul><li>MetaMask</li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="steps-1">Steps<a aria-hidden="true" class="hash-link" href="#steps-1" title="Direct link to heading">​</a></h4><ol><li><p>Clone an existing ETH DApp.</p><p>Create a relative directory, if needed, then enter the directory and clone the repository . </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ mkdir -p ~/projects</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ cd ~/projects</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ git clone https://github.com/TTNguyenDev/Dapps-Support-ForceBridge -b starter</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Run the ETH DApp.
Install the dependencies and  build the smart contracts. Start Ganache to run a local Ethereum development chain.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ cd ~/projects/Dapps-Support-ForceBridge</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ yarn &amp;&amp; yarn build &amp;&amp; yarn start:ganache</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Open another terminal and start the UI server. </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ cd ~/projects/Dapps-Support-ForceBridge</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ yarn ui</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Open a browser tab to http://localhost:3000 to view the DApp after the server started. </p></li><li><p>Set up Godwoken Testnet in MetaMask.</p><p>Set up the Metamask extension in browser and the custom RPC with the following information:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">Network Name: Godwoken Testnet</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">New RPC URL: http://godwoken-testnet-web3-rpc.ckbapp.dev/</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Chain ID: 71393</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Currency Symbol (optional): N/A</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Block Explorer URL (optional): N/A</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Install Polyjuice dependencies.</p><p>To port the Ethereum application with Nervos&#x27; Layer 2, the first step is to install the dependencies that are necessary for Godwoken and Polyjuice to work with. </p><p>Two dependencies need to be added to allow the existing web3 DApp to work with the second tier solution Polyjuice: <code>@polyjuice-provider/web3</code> and <code>nervos-godwoken-integration</code>.</p><p>@polyjuice-provider/web3 is a custom Polyjuice web3 provider used to replace the web3 library, necessary to interact with the Nervos Layer 2 smart contract. Nervos-godwoken-integration is a tool that can generate Polyjuice addresses based on Ethereum addresses.</p><p>Use the following commands to install both:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ cd ~/projects/Dapps-Support-ForceBridge</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ yarn add @polyjuice-provider/web3@0.0.1-rc7 nervos-godwoken-integration@0.0.6</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Add and configure the web3 provider for the Polyjuice web3 provider.</p><p>Create a new <code>config.ts</code> file under the <code>src</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ cd ~/projects/Dapps-Support-ForceBridge/src</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ touch config.ts</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Then fill it with the values presented:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">export const CONFIG = {</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">WEB3_PROVIDER_URL: &#x27;https://godwoken-testnet-web3-rpc.ckbapp.dev&#x27;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">ROLLUP_TYPE_HASH: &#x27;0x4cc2e6526204ae6a2e8fcf12f7ad472f41a1606d5b9624beebd215d780809f6a&#x27;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">ETH_ACCOUNT_LOCK_CODE_HASH: &#x27;0xdeec13a7b8e100579541384ccaf4b5223733e4a5483c3aec95ddc4c1d5ea5b22&#x27;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Update the UI file.
Update the main UI in the file <code>~/projects/blockchain-workshop-ethereum-simple/src/ui/app.tsx</code>. Add the following lines in the main dependency importation section of the file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">import { PolyjuiceHttpProvider } from &#x27;@polyjuice-provider/web3&#x27;;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">import { AddressTranslator } from &#x27;nervos-godwoken-integration&#x27;;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">import { CONFIG } from &#x27;../config&#x27;;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Find and replace line.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">const web3 = new Web3((window as any).ethereum);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p> to</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">const godwokenRpcUrl = CONFIG.WEB3_PROVIDER_URL;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">const providerConfig = {</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">rollupTypeHash: CONFIG.ROLLUP_TYPE_HASH,</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">ethAccountLockCodeHash: CONFIG.ETH_ACCOUNT_LOCK_CODE_HASH,</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">web3Url: godwokenRpcUrl</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">};</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">const provider = new PolyjuiceHttpProvider(godwokenRpcUrl, providerConfig);</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">const web3 = new Web3(provider);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Add a new constant and include the <code>useEffect</code> hook to display the Polyjuice address to the user:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">const [polyjuiceAddress, setPolyjuiceAddress] = useState&lt;string | undefined&gt;();</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">useEffect(() =&gt; {</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    if (accounts-.[0]) {</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        const addressTranslator = new AddressTranslator();</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        setPolyjuiceAddress(addressTranslator.ethAddressToGodwokenShortAddress(accounts-.[0]));</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        setPolyjuiceAddress(undefined);</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">}, [accounts-.[0]]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <code>useEffect</code> hook will execute when <code>accounts-[0]</code> changes. </p><p>Add a new line to the html code to display Polyjuice Address:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">&lt;br /&gt;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Your Polyjuice address: &lt;b&gt;{polyjuiceAddress || &#x27; - &#x27;}&lt;/b&gt;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">&lt;br /&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Set gas limit higher.</p><p>Godwoken Testnet requires a higher gas limit to be set for transactions.</p><p>Open the <code>TTNguyenToken.ts </code> file under the path <code>~/projects/Dapps-Support-ForceBridge/src/lib/contracts</code> and add a new constant at the beginning of the file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">const DEFAULT_SEND_OPTIONS = {</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    gas: 6000000</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Modify 2 functions from:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">async setTransferToken(fromAddress: string, toAddress: string, amount: number) {</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        const tx = await this.contract.methods</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            .transfer(toAddress, this.web3.utils.toWei(this.web3.utils.toBN(amount)))</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            .send({</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                from: fromAddress</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            });</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        return tx;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      async deploy(fromAddress: string) {</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        const deployTx = await (this.contract</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            .deploy({</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                data: TTNguyenTokenJSON.bytecode,</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                arguments: []</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            })</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            .send({</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                from: fromAddress,</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                to: &#x27;0x0000000000000000000000000000000000000000&#x27;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            } as any) as any);</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        this.useDeployed(deployTx.contractAddress);</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        return deployTx.transactionHash;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>to:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">async setTransferToken(fromAddress: string, toAddress: string, amount: number) {</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        const tx = await this.contract.methods</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            .transfer(toAddress, this.web3.utils.toWei(this.web3.utils.toBN(amount)))</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            .send({</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                ...DEFAULT_SEND_OPTIONS,</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                from: fromAddress</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            });</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        return tx;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      async deploy(fromAddress: string) {</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        const deployTx = await (this.contract</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            .deploy({</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                data: TTNguyenTokenJSON.bytecode,</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                arguments: []</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            })</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            .send({</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                ...DEFAULT_SEND_OPTIONS,</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                from: fromAddress,</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                to: &#x27;0x0000000000000000000000000000000000000000&#x27;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            } as any) as any);</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        this.useDeployed(deployTx.contractAddress);</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        return deployTx.transactionHash;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Run and test the DApp</p><p>Input the following command to run the app once all the configs for Godwoken have been completed.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ yarn ui</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Open the browser and navigate to http://localhost:3000/.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="project-examples">Project Examples<a aria-hidden="true" class="hash-link" href="#project-examples" title="Direct link to heading">​</a></h2><ul><li><p><a href="https://github.com/TTNguyenDev/Hackathon-Nervos/tree/main/task_12#document-porting-an-existing-ethereum-dapp-to-polyjuice" target="_blank" rel="noopener noreferrer">Porting an Existing Ethereum DApp to Polyjuice</a></p></li><li><p><a href="https://github.com/Kuzirashi/blockchain-workshop/tree/godwoken-simple" target="_blank" rel="noopener noreferrer">godwoken-simple</a></p></li><li><p><a href="https://github.com/Kuzirashi/blockchain-workshop/tree/godwoken-simple-js" target="_blank" rel="noopener noreferrer">godwoken-simple-js</a></p></li><li><p><a href="https://github.com/YokaiSwap" target="_blank" rel="noopener noreferrer">YokaiSwap</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="decentralization-roadmap">Decentralization Roadmap<a aria-hidden="true" class="hash-link" href="#decentralization-roadmap" title="Direct link to heading">​</a></h2><p>We provide a solid roadmap to evolve the Godwoken network step by step from semi-decentralization to fully decentralization.</p><ul><li><p><strong>Stage 1 (initial launch)</strong>: The whole network has one sequencer to sort transactions. Developers can run their own Godwoken nodes in the readonly mode and watch the on-chain rollup transactions to compute and verify the rollup global state.</p></li><li><p><strong>Stage 2</strong>: The network will introduce permissionless challenger node, everyone can run their Godwoken nodes in challenger mode. If the sequencer commits an invalid state, then, a challenge will be automatically processed by a random Godwoken node. It depends on which node sends the challenge first. If the challenge has successed, the sequencer will lose the staked assets on layer1 and the rollup&#x27;s state will be reverted.</p></li><li><p><strong>Stage 3</strong>: The network will introduce permissionless full nodes. The multiple sequencer mechanism will be investigated and explored.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="references">References<a aria-hidden="true" class="hash-link" href="#references" title="Direct link to heading">​</a></h2><table><thead><tr><th>Resource</th><th>Link</th></tr></thead><tbody><tr><td>Nervos&#x27;<!-- --> <!-- -->Layer<!-- --> <!-- -->2 EVM<!-- --> <!-- -->Training</td><td><a href="https://nervos.gitbook.io/layer-2-evm/" target="_blank" rel="noopener noreferrer">https://nervos.gitbook.io/layer-2-evm/</a></td></tr><tr><td>Nervos<!-- --> <!-- -->Document<!-- --> <!-- -->Website</td><td><a href="https://docs.nervos.org/" target="_blank" rel="noopener noreferrer">https://docs.nervos.org/</a></td></tr><tr><td>Godwoken<!-- --> <!-- -->Basics</td><td><ul><li><a href="https://talk.nervos.org/t/introducing-godwoken-a-missing-piece-of-the-cell-model/4464?_360safeparam=13594453" target="_blank" rel="noopener noreferrer">Introducing Godwoken - A missing piece of the cell model</a></li><li><a href="https://medium.com/nervosnetwork/towards-ckb-style-lego-pieces-polyjuice-on-godwoken-cbc935d77abf" target="_blank" rel="noopener noreferrer">Towards CKB style Lego pieces: Polyjuice on Godwoken</a></li></ul></td></tr><tr><td>Source<!-- --> <!-- -->Code</td><td><a href="https://github.com/nervosnetwork/godwoken" target="_blank" rel="noopener noreferrer">https://github.com/nervosnetwork/godwoken</a></td></tr><tr><td>Godwoken-Kicker</td><td><a href="https://github.com/RetricSu/godwoken-kicker" target="_blank" rel="noopener noreferrer">Godwoken-Kicker: one line command to start godwoken-polyjuice chain</a></td></tr><tr><td>Ethereum<!-- --> <!-- -->RPC<!-- --> <!-- --> (web3<!-- --> <!-- -->RPC)</td><td><a href="https://geth.ethereum.org/docs/rpc/server" target="_blank" rel="noopener noreferrer">Ethereum RPC (web3 RPC)</a></td></tr><tr><td>Gitcoin<!-- --> <!-- -->Hackathon</td><td><ul><li><a href="https://github.com/Kuzirashi/gw-gitcoin-instruction" target="_blank" rel="noopener noreferrer">Godwoken Gitcoin Instruction</a></li><li><a href="https://gitcoin.co/hackathon/nervos/onboard" target="_blank" rel="noopener noreferrer">NERVOS - BROADEN THE SPECTRUM</a></li></ul></td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/xying21/docsite/docs/tools/godwoken/intro.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2021-11-02T10:36:53.000Z">11/2/2021</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docsite/docs/tools/sdk/overview_java"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->ckb-sdk-java</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#godwoken-networks" class="table-of-contents__link toc-highlight">Godwoken Networks</a></li><li><a href="#current-version" class="table-of-contents__link toc-highlight">Current Version</a></li></ul></li><li><a href="#deployment" class="table-of-contents__link toc-highlight">Deployment</a><ul><li><a href="#deploy-a-godwoken-network-by-using-godwoken-kicker" class="table-of-contents__link toc-highlight">Deploy a Godwoken Network by Using Godwoken-Kicker</a></li><li><a href="#deploy-a-godwoken-network-manually" class="table-of-contents__link toc-highlight">Deploy a Godwoken Network Manually</a></li></ul></li><li><a href="#how-to-use-godwoken" class="table-of-contents__link toc-highlight">How to Use Godwoken</a><ul><li><a href="#workflow" class="table-of-contents__link toc-highlight">Workflow</a></li><li><a href="#rpc-documentation-for-reference" class="table-of-contents__link toc-highlight">RPC Documentation for Reference</a></li><li><a href="#an-example-of-deploying-an-ethereum-dapp-to-godwoken-by-godwoken-kicker" class="table-of-contents__link toc-highlight">An Example of Deploying an Ethereum DApp to Godwoken by Godwoken-Kicker</a></li></ul></li><li><a href="#project-examples" class="table-of-contents__link toc-highlight">Project Examples</a></li><li><a href="#decentralization-roadmap" class="table-of-contents__link toc-highlight">Decentralization Roadmap</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/docsite/img/whitecryptape.png" alt="Cryptapers" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/docsite/img/whitecryptape.png" alt="Cryptapers" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></div><div class="footer__copyright">Copyright © 2021 cryptape.com. All Rights Reserved.</div></div></div></footer></div>
<script src="/docsite/assets/js/runtime~main.7d5934c5.js"></script>
<script src="/docsite/assets/js/main.fc76167a.js"></script>
</body>
</html>